<!DOCTYPE html>
<html>
<head>
    <title>Parking ESP32</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div class="container">
        <h1>Estado del Estacionamiento ðŸš—</h1>
        <div class="status">
            <div class="card">
                <h2>Espacios disponibles: <span id="spaces">0</span></h2>
                <p>Ãšltimo RFID: <span id="rfid">N/A</span></p>
            </div>
            
            <div class="grid">
                <div class="spot" id="spot1">1</div>
                <div class="spot" id="spot2">2</div>
                <div class="spot" id="spot3">3</div>
            </div>
        </div>
    </div>

    <script>
        function updateStatus() {
            fetch('/api/status')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('spaces').textContent = data.spaces;
                    document.getElementById('rfid').textContent = data.rfid;
                    
                    data.cajones.forEach((state, index) => {
                        const spot = document.getElementById(`spot${index+1}`);
                        spot.className = `spot ${state ? 'occupied' : 'free'}`;
                        spot.innerHTML = `${index+1}<br>${state ? 'Ocupado' : 'Libre'}`;
                    });
                });
        }
        
        setInterval(updateStatus, 1000);
        updateStatus();
    </script>
</body>
</html>